# Log 2026-02-07

## Changes (Updated)
- Fix SSE parsing to handle metadata split across stream chunks, so "原文细读" displays subtitle content reliably.
- Smooth progress handling by delaying the "生成总结" progress jump until summary content arrives.
- Prevent redundant re-renders in the processing status window by clamping position only when needed.
- **Remove fallback logic that generates summaries from video descriptions**: when no real subtitles/transcription exists, return error instead of using description text.
- Update error messages to clearly indicate yt-dlp installation requirement for audio transcription.

## Implementation Notes
- `hooks/useSummarize.ts`: Add line-buffered parsing for `data:` events and keep partial lines between chunks.
- `hooks/useSummarize.ts`: Gate progress updates before content arrives to avoid stalled 60% states.
- `components/ProcessingStatusWindow.tsx`: Avoid state updates when clamped position does not change.
- `lib/fetchSubtitle.ts`: Remove all fallback logic that converts description/title/ID to subtitle format. Only return real subtitles or audio transcription.
- `pages/api/sumup.ts`: Update error messages to clearly distinguish between "no subtitles" and "yt-dlp not installed".

## Rationale
- Video descriptions are NOT video content. Generating "summaries" from descriptions misleads users.
- Real content sources: CC subtitles (from platform) or audio transcription (via Whisper API).
- When neither is available, fail explicitly and guide users to install yt-dlp or choose videos with subtitles.

## Environment Notes
- Audio transcription (Whisper) requires `yt-dlp` and `ffmpeg` on the server.
- Dev server must be restarted after installing yt-dlp for the new PATH to take effect.
- Current yt-dlp version: 2026.02.04
